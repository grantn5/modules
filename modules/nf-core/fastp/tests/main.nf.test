nextflow_process {

    name "Test Process FASTP"
    script "modules/nf-core/fastp/main.nf"
    process "FASTP"
    tag "module"
    tag "modules_nfcore"
    tag "fastp"

    test("test_fastp_single_end") {

        when {
            params {
                outdir   = "$outputDir"
            }
            process {
                """
                save_trimmed_fail = false
                save_merged       = false

                input[0] = [
                    [ id:'test', single_end:true ],
                    [ file(params.test_data['sarscov2']['illumina']['test_1_fastq_gz'], checkIfExists: true) ]
                ]

                input[1] = []
                input[2] = save_trimmed_fail
                input[3] = save_merged
                """
            }
        }

        then {
            assert process.success
            assert snapshot(
                path(process.out.reads.get(0).get(1)).linesGzip[0..6]
            ).match()
        }

    }

}
